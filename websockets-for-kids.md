# Как работает наша серверная магия (объяснение для ребенка)

Представь, что наш сервер (бэкенд) — это волшебная почта. А твой браузер (фронтенд) — это твой дом.

### 1. Волшебная труба (WebSocket)

Обычно, чтобы отправить письмо, ты отправляешь почтальона, он едет на почту, отдает письмо, ждет ответ и едет обратно. Это долго.

**WebSocket** — это как если бы ты проложил из своего дома на почту волшебную пневматическую трубу. Она всегда открыта! Ты можешь отправлять и получать письма **мгновенно**, не дожидаясь почтальона.

В нашем коде за это отвечает `WebSocketConfig.java`, который говорит: "Эй, все, у нас есть волшебная труба по адресу `/ws`!"

### 2. Почтовые ящики и подписка (Topics & Subscriptions)

На нашей волшебной почте есть много почтовых ящиков с разными адресами:
- `/topic/rooms` — ящик для новостей о комнатах.
- `/topic/room/123/state` — ящик для новостей о том, что происходит в игре в комнате "123".

Когда ты заходишь на сайт, твой дом (браузер) отправляет на почту сообщение: "Я хочу получать все письма из ящика `/topic/rooms`". Это называется **подписка**. Почта дает тебе волшебный ключик от этого ящика.

### 3. Отправка письма (Actions)

Когда ты хочешь что-то сделать, например, создать комнату, твой дом пишет письмо: "Хочу создать комнату 'Супер-Игра'". На конверте ты пишешь специальный адрес для работников почты: `/app/rooms/create`. И отправляешь это письмо по волшебной трубе.

### 4. Работники почты (Контроллеры)

На почте сидят волшебные работники — **контроллеры**.

- **`RoomController`**: Этот работник ждет письма, адресованные, например, на `/app/rooms/create`.
- **`GameController`**: Этот ждет письма про игровые действия, например, на `/app/room/123/action`.

### Как все работает вместе: Пример с созданием комнаты

1.  **Ты (твой дом)** отправляешь по трубе письмо с адресом `/app/rooms/create` и текстом "Новая комната".

2.  **Работник `RoomController`** получает твое письмо. Он читает его, создает настоящую комнату и говорит: "Отлично, новая комната создана!"

3.  Теперь ему нужно **сообщить всем**, у кого есть ключ от ящика `/topic/rooms`. Он пишет новое письмо: "Ребята, вот обновленный список всех комнат!" и кладет по копии в ящик `/topic/rooms`.

4.  Поскольку у тебя есть ключик от этого ящика, это письмо **мгновенно** прилетает к тебе по волшебной трубе.

5.  Твой дом получает письмо, читает новый список и показывает его тебе на экране.

Вот и вся магия! Мы используем "волшебную трубу" для быстрой связи и "почтовые ящики" с подпиской, чтобы каждый получал только те новости, которые ему интересны.